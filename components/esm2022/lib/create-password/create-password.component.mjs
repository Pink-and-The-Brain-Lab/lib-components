import { Component, EventEmitter, Output, } from '@angular/core';
import { FormControl, FormGroup, Validators, } from '@angular/forms';
import { Subject, takeUntil } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../input-validation/input-validation.directive";
import * as i3 from "@angular/forms";
import * as i4 from "../password-validation/password-validation.directive";
import * as i5 from "@ngx-translate/core";
export class CreatePasswordComponent {
    constructor() {
        this.destroy$ = new Subject();
        this.passwordValidation = new EventEmitter();
        this.submitEvent = new EventEmitter();
        this.passwordEvent = new EventEmitter();
        this.inputConfig = ['password', 'password'];
        this.isPasswordValid = false;
        this.passwordsAreEquals = () => {
            return () => {
                return this.password?.value === this.confirmPassword?.value
                    ? null
                    : { passwordsDiferent: true };
            };
        };
        this.form = new FormGroup({
            password: new FormControl('', [Validators.required]),
            confirmPassword: new FormControl('', [
                Validators.required,
                this.passwordsAreEquals(),
            ]),
        });
    }
    ngOnInit() {
        this.watchInputValuesChanges();
    }
    ngOnDestroy() {
        this.destroy$.next(true);
        this.destroy$.unsubscribe();
    }
    watchInputValuesChanges() {
        this.form.valueChanges.pipe(takeUntil(this.destroy$)).subscribe(() => {
            this.passwordValidation.emit(this._passwordValidation);
            if (!this._passwordValidation)
                return;
            this.passwordEvent.emit({
                password: this.password?.value,
                confirmPassword: this.confirmPassword?.value,
            });
        });
    }
    validatePassword(value) {
        this.isPasswordValid = value;
    }
    get password() {
        return this.form?.get('password');
    }
    get confirmPassword() {
        return this.form?.get('confirmPassword');
    }
    get _passwordValidation() {
        const arePassValid = !!this.password?.valid && !!this.confirmPassword?.valid;
        const arePassEquals = this.password?.value === this.confirmPassword?.value;
        return this.isPasswordValid && arePassValid && arePassEquals;
    }
    togglePasswordVisibility(index, type) {
        this.inputConfig[index] = type;
    }
    submit() {
        if (!this._passwordValidation)
            return;
        this.submitEvent.emit();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.10", ngImport: i0, type: CreatePasswordComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.10", type: CreatePasswordComponent, selector: "cdk-create-password", outputs: { passwordValidation: "passwordValidation", submitEvent: "submitEvent", passwordEvent: "passwordEvent" }, ngImport: i0, template: "<form [formGroup]=\"form\" class=\"d-flex flex-column\" (submit)=\"submit()\">\r\n    <div class=\"row-form right-icon w-100\">\r\n        <input [type]=\"inputConfig[0]\" cdkInputValidation formControlName=\"password\" />\r\n        <label>{{ 'PASSWORD' | translate }}</label>\r\n        <i class=\"bi bi-eye\" *ngIf=\"inputConfig[0] !== 'password'\" (click)=\"togglePasswordVisibility(0, 'password')\"></i>\r\n        <i class=\"bi bi-eye-slash\" *ngIf=\"inputConfig[0] === 'password'\" (click)=\"togglePasswordVisibility(0, 'text')\"></i>\r\n\r\n        <small *ngIf=\"password && password.touched && password.errors\">\r\n            <span *ngIf=\"password && password.errors['required']\">{{ 'PASSWORD_REQUIRED' | translate }}</span>\r\n        </small>\r\n    </div>\r\n\r\n    <p\r\n        class=\"mt-4 mb-0\"\r\n        [cdkPasswordValidation]=\"password?.value\"\r\n        (isValid)=\"validatePassword($event)\"\r\n    >\r\n        {{ 'AT_LEAST' | translate }} \r\n        <span>8 {{ 'CHARACTERS' | translate }}</span>, \r\n        {{ 'INCLUDING_A' | translate }} \r\n        <span>{{ 'NUMBER' | translate }}</span> \r\n        {{ 'AND_A' | translate }} \r\n        <span>{{ 'LETTER' | translate }}</span>\r\n    </p>\r\n\r\n    <div class=\"row-form right-icon w-100\">\r\n        <input [type]=\"inputConfig[1]\" cdkInputValidation formControlName=\"confirmPassword\" />\r\n        <label>{{ 'CONFIRM_PASSWORD' | translate }}</label>\r\n        <i class=\"bi bi-eye\" *ngIf=\"inputConfig[1] !== 'password'\" (click)=\"togglePasswordVisibility(1, 'password')\"></i>\r\n        <i class=\"bi bi-eye-slash\" *ngIf=\"inputConfig[1] === 'password'\" (click)=\"togglePasswordVisibility(1, 'text')\"></i>\r\n\r\n        <small *ngIf=\"confirmPassword && confirmPassword.touched && confirmPassword.errors\">\r\n            <span *ngIf=\"confirmPassword && confirmPassword.errors['required']\">{{ 'FORM_VALIDATIONS.PASSWORD_CONFIRMATION_REQUIRED' | translate }}</span>\r\n            <span *ngIf=\"password && confirmPassword.errors['passwordsDiferent']\">{{ 'FORM_VALIDATIONS.PASSWORD_CONFIRMATION_NEED_TO_BE_EQUALS' | translate }}</span>\r\n        </small>\r\n    </div>\r\n\r\n    <button type=\"submit\" hidden></button>\r\n</form>", styles: ["p{color:var(--emphasis-low);font-size:.875em}i{color:var(--emphasis-low);cursor:pointer}\n"], dependencies: [{ kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.InputValidationDirective, selector: "[cdkInputValidation]" }, { kind: "directive", type: i3.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i3.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i3.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }, { kind: "directive", type: i4.PasswordValidationDirective, selector: "[cdkPasswordValidation]", inputs: ["cdkPasswordValidation"], outputs: ["isValid"] }, { kind: "pipe", type: i5.TranslatePipe, name: "translate" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.10", ngImport: i0, type: CreatePasswordComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cdk-create-password', template: "<form [formGroup]=\"form\" class=\"d-flex flex-column\" (submit)=\"submit()\">\r\n    <div class=\"row-form right-icon w-100\">\r\n        <input [type]=\"inputConfig[0]\" cdkInputValidation formControlName=\"password\" />\r\n        <label>{{ 'PASSWORD' | translate }}</label>\r\n        <i class=\"bi bi-eye\" *ngIf=\"inputConfig[0] !== 'password'\" (click)=\"togglePasswordVisibility(0, 'password')\"></i>\r\n        <i class=\"bi bi-eye-slash\" *ngIf=\"inputConfig[0] === 'password'\" (click)=\"togglePasswordVisibility(0, 'text')\"></i>\r\n\r\n        <small *ngIf=\"password && password.touched && password.errors\">\r\n            <span *ngIf=\"password && password.errors['required']\">{{ 'PASSWORD_REQUIRED' | translate }}</span>\r\n        </small>\r\n    </div>\r\n\r\n    <p\r\n        class=\"mt-4 mb-0\"\r\n        [cdkPasswordValidation]=\"password?.value\"\r\n        (isValid)=\"validatePassword($event)\"\r\n    >\r\n        {{ 'AT_LEAST' | translate }} \r\n        <span>8 {{ 'CHARACTERS' | translate }}</span>, \r\n        {{ 'INCLUDING_A' | translate }} \r\n        <span>{{ 'NUMBER' | translate }}</span> \r\n        {{ 'AND_A' | translate }} \r\n        <span>{{ 'LETTER' | translate }}</span>\r\n    </p>\r\n\r\n    <div class=\"row-form right-icon w-100\">\r\n        <input [type]=\"inputConfig[1]\" cdkInputValidation formControlName=\"confirmPassword\" />\r\n        <label>{{ 'CONFIRM_PASSWORD' | translate }}</label>\r\n        <i class=\"bi bi-eye\" *ngIf=\"inputConfig[1] !== 'password'\" (click)=\"togglePasswordVisibility(1, 'password')\"></i>\r\n        <i class=\"bi bi-eye-slash\" *ngIf=\"inputConfig[1] === 'password'\" (click)=\"togglePasswordVisibility(1, 'text')\"></i>\r\n\r\n        <small *ngIf=\"confirmPassword && confirmPassword.touched && confirmPassword.errors\">\r\n            <span *ngIf=\"confirmPassword && confirmPassword.errors['required']\">{{ 'FORM_VALIDATIONS.PASSWORD_CONFIRMATION_REQUIRED' | translate }}</span>\r\n            <span *ngIf=\"password && confirmPassword.errors['passwordsDiferent']\">{{ 'FORM_VALIDATIONS.PASSWORD_CONFIRMATION_NEED_TO_BE_EQUALS' | translate }}</span>\r\n        </small>\r\n    </div>\r\n\r\n    <button type=\"submit\" hidden></button>\r\n</form>", styles: ["p{color:var(--emphasis-low);font-size:.875em}i{color:var(--emphasis-low);cursor:pointer}\n"] }]
        }], propDecorators: { passwordValidation: [{
                type: Output
            }], submitEvent: [{
                type: Output
            }], passwordEvent: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLXBhc3N3b3JkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbXBvbmVudHMvc3JjL2xpYi9jcmVhdGUtcGFzc3dvcmQvY3JlYXRlLXBhc3N3b3JkLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbXBvbmVudHMvc3JjL2xpYi9jcmVhdGUtcGFzc3dvcmQvY3JlYXRlLXBhc3N3b3JkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUdaLE1BQU0sR0FDUCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBRUwsV0FBVyxFQUNYLFNBQVMsRUFHVCxVQUFVLEdBQ1gsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QixPQUFPLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLE1BQU0sQ0FBQzs7Ozs7OztBQVExQyxNQUFNLE9BQU8sdUJBQXVCO0lBTHBDO1FBTVUsYUFBUSxHQUFHLElBQUksT0FBTyxFQUFXLENBQUM7UUFDaEMsdUJBQWtCLEdBQUcsSUFBSSxZQUFZLEVBQVcsQ0FBQztRQUNqRCxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7UUFDdkMsa0JBQWEsR0FBRyxJQUFJLFlBQVksRUFBa0IsQ0FBQztRQUM3RCxnQkFBVyxHQUFnQixDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUNwRCxvQkFBZSxHQUFHLEtBQUssQ0FBQztRQUV4Qix1QkFBa0IsR0FBRyxHQUFnQixFQUFFO1lBQ3JDLE9BQU8sR0FBNEIsRUFBRTtnQkFDbkMsT0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLEtBQUssS0FBSyxJQUFJLENBQUMsZUFBZSxFQUFFLEtBQUs7b0JBQ3pELENBQUMsQ0FBQyxJQUFJO29CQUNOLENBQUMsQ0FBQyxFQUFFLGlCQUFpQixFQUFFLElBQUksRUFBRSxDQUFDO1lBQ2xDLENBQUMsQ0FBQztRQUNKLENBQUMsQ0FBQztRQUVGLFNBQUksR0FBRyxJQUFJLFNBQVMsQ0FBQztZQUNuQixRQUFRLEVBQUUsSUFBSSxXQUFXLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3BELGVBQWUsRUFBRSxJQUFJLFdBQVcsQ0FBQyxFQUFFLEVBQUU7Z0JBQ25DLFVBQVUsQ0FBQyxRQUFRO2dCQUNuQixJQUFJLENBQUMsa0JBQWtCLEVBQUU7YUFDMUIsQ0FBQztTQUNILENBQUMsQ0FBQztLQWlESjtJQS9DQyxRQUFRO1FBQ04sSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzlCLENBQUM7SUFFTyx1QkFBdUI7UUFDN0IsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFO1lBQ25FLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDdkQsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUI7Z0JBQUUsT0FBTztZQUN0QyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQztnQkFDdEIsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSztnQkFDOUIsZUFBZSxFQUFFLElBQUksQ0FBQyxlQUFlLEVBQUUsS0FBSzthQUM3QyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxLQUFjO1FBQzdCLElBQUksQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDO0lBQy9CLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDVixPQUFPLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFFRCxJQUFJLGVBQWU7UUFDakIsT0FBTyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFRCxJQUFJLG1CQUFtQjtRQUNyQixNQUFNLFlBQVksR0FDaEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLEtBQUssQ0FBQztRQUMxRCxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLEtBQUssS0FBSyxJQUFJLENBQUMsZUFBZSxFQUFFLEtBQUssQ0FBQztRQUMzRSxPQUFPLElBQUksQ0FBQyxlQUFlLElBQUksWUFBWSxJQUFJLGFBQWEsQ0FBQztJQUMvRCxDQUFDO0lBRUQsd0JBQXdCLENBQUMsS0FBYSxFQUFFLElBQWU7UUFDckQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDakMsQ0FBQztJQUVELE1BQU07UUFDSixJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQjtZQUFFLE9BQU87UUFDdEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMxQixDQUFDOytHQXRFVSx1QkFBdUI7bUdBQXZCLHVCQUF1Qiw4S0N2QnBDLGtzRUFzQ087OzRGRGZNLHVCQUF1QjtrQkFMbkMsU0FBUzsrQkFDRSxxQkFBcUI7OEJBTXJCLGtCQUFrQjtzQkFBM0IsTUFBTTtnQkFDRyxXQUFXO3NCQUFwQixNQUFNO2dCQUNHLGFBQWE7c0JBQXRCLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbXBvbmVudCxcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgT25EZXN0cm95LFxyXG4gIE9uSW5pdCxcclxuICBPdXRwdXQsXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgQWJzdHJhY3RDb250cm9sLFxyXG4gIEZvcm1Db250cm9sLFxyXG4gIEZvcm1Hcm91cCxcclxuICBWYWxpZGF0aW9uRXJyb3JzLFxyXG4gIFZhbGlkYXRvckZuLFxyXG4gIFZhbGlkYXRvcnMsXHJcbn0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBTdWJqZWN0LCB0YWtlVW50aWwgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgSW5wdXRUeXBlIH0gZnJvbSAnLi9tb2RlbHMvaW5wdXQtdHlwZSc7XHJcbmltcG9ydCB7IElQYXNzd29yZEV2ZW50IH0gZnJvbSAnLi9tb2RlbHMvcGFzc3dvcmQtZXZlbnQnO1xyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2Nkay1jcmVhdGUtcGFzc3dvcmQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9jcmVhdGUtcGFzc3dvcmQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2NyZWF0ZS1wYXNzd29yZC5jb21wb25lbnQuc2NzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ3JlYXRlUGFzc3dvcmRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XHJcbiAgcHJpdmF0ZSBkZXN0cm95JCA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KCk7XHJcbiAgQE91dHB1dCgpIHBhc3N3b3JkVmFsaWRhdGlvbiA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcclxuICBAT3V0cHV0KCkgc3VibWl0RXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcbiAgQE91dHB1dCgpIHBhc3N3b3JkRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPElQYXNzd29yZEV2ZW50PigpO1xyXG4gIGlucHV0Q29uZmlnOiBJbnB1dFR5cGVbXSA9IFsncGFzc3dvcmQnLCAncGFzc3dvcmQnXTtcclxuICBpc1Bhc3N3b3JkVmFsaWQgPSBmYWxzZTtcclxuXHJcbiAgcGFzc3dvcmRzQXJlRXF1YWxzID0gKCk6IFZhbGlkYXRvckZuID0+IHtcclxuICAgIHJldHVybiAoKTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5wYXNzd29yZD8udmFsdWUgPT09IHRoaXMuY29uZmlybVBhc3N3b3JkPy52YWx1ZVxyXG4gICAgICAgID8gbnVsbFxyXG4gICAgICAgIDogeyBwYXNzd29yZHNEaWZlcmVudDogdHJ1ZSB9O1xyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICBmb3JtID0gbmV3IEZvcm1Hcm91cCh7XHJcbiAgICBwYXNzd29yZDogbmV3IEZvcm1Db250cm9sKCcnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZF0pLFxyXG4gICAgY29uZmlybVBhc3N3b3JkOiBuZXcgRm9ybUNvbnRyb2woJycsIFtcclxuICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcclxuICAgICAgdGhpcy5wYXNzd29yZHNBcmVFcXVhbHMoKSxcclxuICAgIF0pLFxyXG4gIH0pO1xyXG5cclxuICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMud2F0Y2hJbnB1dFZhbHVlc0NoYW5nZXMoKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5kZXN0cm95JC5uZXh0KHRydWUpO1xyXG4gICAgdGhpcy5kZXN0cm95JC51bnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB3YXRjaElucHV0VmFsdWVzQ2hhbmdlcygpIHtcclxuICAgIHRoaXMuZm9ybS52YWx1ZUNoYW5nZXMucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgIHRoaXMucGFzc3dvcmRWYWxpZGF0aW9uLmVtaXQodGhpcy5fcGFzc3dvcmRWYWxpZGF0aW9uKTtcclxuICAgICAgaWYgKCF0aGlzLl9wYXNzd29yZFZhbGlkYXRpb24pIHJldHVybjtcclxuICAgICAgdGhpcy5wYXNzd29yZEV2ZW50LmVtaXQoe1xyXG4gICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkPy52YWx1ZSxcclxuICAgICAgICBjb25maXJtUGFzc3dvcmQ6IHRoaXMuY29uZmlybVBhc3N3b3JkPy52YWx1ZSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHZhbGlkYXRlUGFzc3dvcmQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuaXNQYXNzd29yZFZhbGlkID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBnZXQgcGFzc3dvcmQoKTogQWJzdHJhY3RDb250cm9sIHwgbnVsbCB7XHJcbiAgICByZXR1cm4gdGhpcy5mb3JtPy5nZXQoJ3Bhc3N3b3JkJyk7XHJcbiAgfVxyXG5cclxuICBnZXQgY29uZmlybVBhc3N3b3JkKCk6IEFic3RyYWN0Q29udHJvbCB8IG51bGwge1xyXG4gICAgcmV0dXJuIHRoaXMuZm9ybT8uZ2V0KCdjb25maXJtUGFzc3dvcmQnKTtcclxuICB9XHJcblxyXG4gIGdldCBfcGFzc3dvcmRWYWxpZGF0aW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgYXJlUGFzc1ZhbGlkID1cclxuICAgICAgISF0aGlzLnBhc3N3b3JkPy52YWxpZCAmJiAhIXRoaXMuY29uZmlybVBhc3N3b3JkPy52YWxpZDtcclxuICAgIGNvbnN0IGFyZVBhc3NFcXVhbHMgPSB0aGlzLnBhc3N3b3JkPy52YWx1ZSA9PT0gdGhpcy5jb25maXJtUGFzc3dvcmQ/LnZhbHVlO1xyXG4gICAgcmV0dXJuIHRoaXMuaXNQYXNzd29yZFZhbGlkICYmIGFyZVBhc3NWYWxpZCAmJiBhcmVQYXNzRXF1YWxzO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlUGFzc3dvcmRWaXNpYmlsaXR5KGluZGV4OiBudW1iZXIsIHR5cGU6IElucHV0VHlwZSkge1xyXG4gICAgdGhpcy5pbnB1dENvbmZpZ1tpbmRleF0gPSB0eXBlO1xyXG4gIH1cclxuXHJcbiAgc3VibWl0KCkge1xyXG4gICAgaWYgKCF0aGlzLl9wYXNzd29yZFZhbGlkYXRpb24pIHJldHVybjtcclxuICAgIHRoaXMuc3VibWl0RXZlbnQuZW1pdCgpO1xyXG4gIH1cclxufVxyXG4iLCI8Zm9ybSBbZm9ybUdyb3VwXT1cImZvcm1cIiBjbGFzcz1cImQtZmxleCBmbGV4LWNvbHVtblwiIChzdWJtaXQpPVwic3VibWl0KClcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJyb3ctZm9ybSByaWdodC1pY29uIHctMTAwXCI+XHJcbiAgICAgICAgPGlucHV0IFt0eXBlXT1cImlucHV0Q29uZmlnWzBdXCIgY2RrSW5wdXRWYWxpZGF0aW9uIGZvcm1Db250cm9sTmFtZT1cInBhc3N3b3JkXCIgLz5cclxuICAgICAgICA8bGFiZWw+e3sgJ1BBU1NXT1JEJyB8IHRyYW5zbGF0ZSB9fTwvbGFiZWw+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJiaSBiaS1leWVcIiAqbmdJZj1cImlucHV0Q29uZmlnWzBdICE9PSAncGFzc3dvcmQnXCIgKGNsaWNrKT1cInRvZ2dsZVBhc3N3b3JkVmlzaWJpbGl0eSgwLCAncGFzc3dvcmQnKVwiPjwvaT5cclxuICAgICAgICA8aSBjbGFzcz1cImJpIGJpLWV5ZS1zbGFzaFwiICpuZ0lmPVwiaW5wdXRDb25maWdbMF0gPT09ICdwYXNzd29yZCdcIiAoY2xpY2spPVwidG9nZ2xlUGFzc3dvcmRWaXNpYmlsaXR5KDAsICd0ZXh0JylcIj48L2k+XHJcblxyXG4gICAgICAgIDxzbWFsbCAqbmdJZj1cInBhc3N3b3JkICYmIHBhc3N3b3JkLnRvdWNoZWQgJiYgcGFzc3dvcmQuZXJyb3JzXCI+XHJcbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwicGFzc3dvcmQgJiYgcGFzc3dvcmQuZXJyb3JzWydyZXF1aXJlZCddXCI+e3sgJ1BBU1NXT1JEX1JFUVVJUkVEJyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cclxuICAgICAgICA8L3NtYWxsPlxyXG4gICAgPC9kaXY+XHJcblxyXG4gICAgPHBcclxuICAgICAgICBjbGFzcz1cIm10LTQgbWItMFwiXHJcbiAgICAgICAgW2Nka1Bhc3N3b3JkVmFsaWRhdGlvbl09XCJwYXNzd29yZD8udmFsdWVcIlxyXG4gICAgICAgIChpc1ZhbGlkKT1cInZhbGlkYXRlUGFzc3dvcmQoJGV2ZW50KVwiXHJcbiAgICA+XHJcbiAgICAgICAge3sgJ0FUX0xFQVNUJyB8IHRyYW5zbGF0ZSB9fSBcclxuICAgICAgICA8c3Bhbj44IHt7ICdDSEFSQUNURVJTJyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj4sIFxyXG4gICAgICAgIHt7ICdJTkNMVURJTkdfQScgfCB0cmFuc2xhdGUgfX0gXHJcbiAgICAgICAgPHNwYW4+e3sgJ05VTUJFUicgfCB0cmFuc2xhdGUgfX08L3NwYW4+IFxyXG4gICAgICAgIHt7ICdBTkRfQScgfCB0cmFuc2xhdGUgfX0gXHJcbiAgICAgICAgPHNwYW4+e3sgJ0xFVFRFUicgfCB0cmFuc2xhdGUgfX08L3NwYW4+XHJcbiAgICA8L3A+XHJcblxyXG4gICAgPGRpdiBjbGFzcz1cInJvdy1mb3JtIHJpZ2h0LWljb24gdy0xMDBcIj5cclxuICAgICAgICA8aW5wdXQgW3R5cGVdPVwiaW5wdXRDb25maWdbMV1cIiBjZGtJbnB1dFZhbGlkYXRpb24gZm9ybUNvbnRyb2xOYW1lPVwiY29uZmlybVBhc3N3b3JkXCIgLz5cclxuICAgICAgICA8bGFiZWw+e3sgJ0NPTkZJUk1fUEFTU1dPUkQnIHwgdHJhbnNsYXRlIH19PC9sYWJlbD5cclxuICAgICAgICA8aSBjbGFzcz1cImJpIGJpLWV5ZVwiICpuZ0lmPVwiaW5wdXRDb25maWdbMV0gIT09ICdwYXNzd29yZCdcIiAoY2xpY2spPVwidG9nZ2xlUGFzc3dvcmRWaXNpYmlsaXR5KDEsICdwYXNzd29yZCcpXCI+PC9pPlxyXG4gICAgICAgIDxpIGNsYXNzPVwiYmkgYmktZXllLXNsYXNoXCIgKm5nSWY9XCJpbnB1dENvbmZpZ1sxXSA9PT0gJ3Bhc3N3b3JkJ1wiIChjbGljayk9XCJ0b2dnbGVQYXNzd29yZFZpc2liaWxpdHkoMSwgJ3RleHQnKVwiPjwvaT5cclxuXHJcbiAgICAgICAgPHNtYWxsICpuZ0lmPVwiY29uZmlybVBhc3N3b3JkICYmIGNvbmZpcm1QYXNzd29yZC50b3VjaGVkICYmIGNvbmZpcm1QYXNzd29yZC5lcnJvcnNcIj5cclxuICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJjb25maXJtUGFzc3dvcmQgJiYgY29uZmlybVBhc3N3b3JkLmVycm9yc1sncmVxdWlyZWQnXVwiPnt7ICdGT1JNX1ZBTElEQVRJT05TLlBBU1NXT1JEX0NPTkZJUk1BVElPTl9SRVFVSVJFRCcgfCB0cmFuc2xhdGUgfX08L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwicGFzc3dvcmQgJiYgY29uZmlybVBhc3N3b3JkLmVycm9yc1sncGFzc3dvcmRzRGlmZXJlbnQnXVwiPnt7ICdGT1JNX1ZBTElEQVRJT05TLlBBU1NXT1JEX0NPTkZJUk1BVElPTl9ORUVEX1RPX0JFX0VRVUFMUycgfCB0cmFuc2xhdGUgfX08L3NwYW4+XHJcbiAgICAgICAgPC9zbWFsbD5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGhpZGRlbj48L2J1dHRvbj5cclxuPC9mb3JtPiJdfQ==