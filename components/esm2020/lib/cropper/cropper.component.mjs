import { Component, Inject, ViewChild } from '@angular/core';
import { ImageCropperComponent } from 'ngx-image-cropper';
import { IMAGE_DATA } from '../modal/interfaces/image-data.const';
import { MODAL_SERVICE_DATA } from '../modal/interfaces/modal-service-data.const';
import * as i0 from "@angular/core";
import * as i1 from "../avatar/avatar.component";
import * as i2 from "ngx-image-cropper";
import * as i3 from "../range/range.component";
import * as i4 from "ng2-tooltip-directive";
export class CropperComponent {
    constructor(imageFile, modalService) {
        this.imageFile = imageFile;
        this.modalService = modalService;
        this.imageCropper = {};
        this.imageCroppedFile = '';
        this.imageRotation = 0;
        this.imageFlipH = false;
        this.imageZoom = 1;
        this.imageCroppedFile = imageFile;
    }
    imageCropped(event) {
        this.imageCroppedFile = event.objectUrl || this.imageFile;
        this.modalService.getComponentResultData(this.imageCroppedFile);
    }
    selectedRange(event) {
        const baseDeg = 45;
        const maxDeg = 180;
        const parsedRange = parseInt(event);
        const totalToRotate = (parsedRange * maxDeg) / 100 / baseDeg;
        this.imageRotation = totalToRotate;
    }
    rotateImage() {
        this.imageRotation++;
    }
    invertImage() {
        this.imageFlipH = !this.imageFlipH;
    }
    zoomOutImage() {
        if (this.imageZoom <= 1)
            return;
        this.imageZoom--;
    }
    zoomInImage() {
        if (this.imageZoom >= 10)
            return;
        this.imageZoom++;
    }
}
CropperComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.1.2", ngImport: i0, type: CropperComponent, deps: [{ token: IMAGE_DATA }, { token: MODAL_SERVICE_DATA }], target: i0.ɵɵFactoryTarget.Component });
CropperComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.1.2", type: CropperComponent, selector: "cdk-cropper", viewQueries: [{ propertyName: "imageCropper", first: true, predicate: ImageCropperComponent, descendants: true }], ngImport: i0, template: "<div class=\"d-flex align-items-center flex-column\">\r\n    <cdk-avatar\r\n        size=\"xl\"\r\n        [imageUrl]=\"imageCroppedFile\"\r\n    ></cdk-avatar>\r\n\r\n    <div class=\"preview mt-4\">\r\n        <image-cropper\r\n            [imageURL]=\"imageFile\"\r\n            [aspectRatio]=\"1 / 1\"\r\n            [canvasRotation]=\"imageRotation\"\r\n            [maintainAspectRatio]=\"false\"\r\n            [transform]=\"{\r\n                flipH: imageFlipH,\r\n                scale: imageZoom\r\n            }\"\r\n            (imageCropped)=\"imageCropped($event)\"\r\n        ></image-cropper>\r\n    </div>\r\n\r\n    <div class=\"controls mt-2 w-100\">\r\n        <div class=\"row\">\r\n            <div class=\"col-6 d-flex align-items-center justify-content-between\">\r\n                <span class=\"me-2\">Rotate</span>\r\n                <cdk-range (selectedRange)=\"selectedRange($event)\"></cdk-range>\r\n            </div>\r\n\r\n            <div class=\"col-6\">\r\n                <div class=\"d-flex align-items-center justify-content-between\">\r\n                    <i class=\"bi bi-arrow-clockwise\" tooltip=\"Rotate\" placement=\"top\" (click)=\"rotateImage()\"></i>\r\n                    <i class=\"bi bi-symmetry-vertical\" tooltip=\"Invert\" placement=\"top\" (click)=\"invertImage()\"></i>\r\n                    <i class=\"bi bi-dash\" tooltip=\"Zoom out\" placement=\"top\" (click)=\"zoomOutImage()\"></i>\r\n                    <i class=\"bi bi-plus\" tooltip=\"Zoom in\" placement=\"top\" (click)=\"zoomInImage()\"></i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>", styles: ["image-cropper{padding:0!important;width:300px;height:300px}span{color:var(--emphasis-medium);font-size:.6875em;font-weight:600;line-height:.75em}cdk-range{display:contents}i{font-size:.875em;cursor:pointer;color:var(--emphasis-medium)}\n"], dependencies: [{ kind: "component", type: i1.AvatarComponent, selector: "cdk-avatar", inputs: ["imageUrl", "size", "mask", "maskType", "secondMaskType", "status", "color", "name"] }, { kind: "component", type: i2.ImageCropperComponent, selector: "image-cropper", inputs: ["imageChangedEvent", "imageURL", "imageBase64", "imageFile", "imageAltText", "output", "format", "transform", "maintainAspectRatio", "aspectRatio", "resetCropOnAspectRatioChange", "resizeToWidth", "resizeToHeight", "cropperMinWidth", "cropperMinHeight", "cropperMaxHeight", "cropperMaxWidth", "cropperStaticWidth", "cropperStaticHeight", "canvasRotation", "initialStepSize", "roundCropper", "onlyScaleDown", "imageQuality", "autoCrop", "backgroundColor", "containWithinAspectRatio", "hideResizeSquares", "allowMoveImage", "cropper", "alignImage", "disabled", "hidden"], outputs: ["imageCropped", "startCropImage", "imageLoaded", "cropperReady", "loadImageFailed", "transformChange"] }, { kind: "component", type: i3.RangeComponent, selector: "cdk-range", inputs: ["min", "max", "step"], outputs: ["selectedRange"] }, { kind: "directive", type: i4.TooltipDirective, selector: "[tooltip]", inputs: ["options", "tooltip", "placement", "autoPlacement", "content-type", "contentType", "hide-delay-mobile", "hideDelayTouchscreen", "z-index", "zIndex", "animation-duration", "animationDuration", "trigger", "tooltip-class", "tooltipClass", "display", "display-mobile", "displayTouchscreen", "shadow", "theme", "offset", "width", "max-width", "maxWidth", "id", "show-delay", "showDelay", "hide-delay", "hideDelay", "hideDelayAfterClick", "pointerEvents", "position"], outputs: ["events"], exportAs: ["tooltip"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.1.2", ngImport: i0, type: CropperComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cdk-cropper', template: "<div class=\"d-flex align-items-center flex-column\">\r\n    <cdk-avatar\r\n        size=\"xl\"\r\n        [imageUrl]=\"imageCroppedFile\"\r\n    ></cdk-avatar>\r\n\r\n    <div class=\"preview mt-4\">\r\n        <image-cropper\r\n            [imageURL]=\"imageFile\"\r\n            [aspectRatio]=\"1 / 1\"\r\n            [canvasRotation]=\"imageRotation\"\r\n            [maintainAspectRatio]=\"false\"\r\n            [transform]=\"{\r\n                flipH: imageFlipH,\r\n                scale: imageZoom\r\n            }\"\r\n            (imageCropped)=\"imageCropped($event)\"\r\n        ></image-cropper>\r\n    </div>\r\n\r\n    <div class=\"controls mt-2 w-100\">\r\n        <div class=\"row\">\r\n            <div class=\"col-6 d-flex align-items-center justify-content-between\">\r\n                <span class=\"me-2\">Rotate</span>\r\n                <cdk-range (selectedRange)=\"selectedRange($event)\"></cdk-range>\r\n            </div>\r\n\r\n            <div class=\"col-6\">\r\n                <div class=\"d-flex align-items-center justify-content-between\">\r\n                    <i class=\"bi bi-arrow-clockwise\" tooltip=\"Rotate\" placement=\"top\" (click)=\"rotateImage()\"></i>\r\n                    <i class=\"bi bi-symmetry-vertical\" tooltip=\"Invert\" placement=\"top\" (click)=\"invertImage()\"></i>\r\n                    <i class=\"bi bi-dash\" tooltip=\"Zoom out\" placement=\"top\" (click)=\"zoomOutImage()\"></i>\r\n                    <i class=\"bi bi-plus\" tooltip=\"Zoom in\" placement=\"top\" (click)=\"zoomInImage()\"></i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>", styles: ["image-cropper{padding:0!important;width:300px;height:300px}span{color:var(--emphasis-medium);font-size:.6875em;font-weight:600;line-height:.75em}cdk-range{display:contents}i{font-size:.875em;cursor:pointer;color:var(--emphasis-medium)}\n"] }]
        }], ctorParameters: function () { return [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [IMAGE_DATA]
                }] }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [MODAL_SERVICE_DATA]
                }] }]; }, propDecorators: { imageCropper: [{
                type: ViewChild,
                args: [ImageCropperComponent]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JvcHBlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb21wb25lbnRzL3NyYy9saWIvY3JvcHBlci9jcm9wcGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbXBvbmVudHMvc3JjL2xpYi9jcm9wcGVyL2Nyb3BwZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzdELE9BQU8sRUFBcUIscUJBQXFCLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUM3RSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0NBQXNDLENBQUM7QUFDbEUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sOENBQThDLENBQUM7Ozs7OztBQU9sRixNQUFNLE9BQU8sZ0JBQWdCO0lBUTNCLFlBQzZCLFNBQWlCLEVBQ1QsWUFBaUI7UUFEekIsY0FBUyxHQUFULFNBQVMsQ0FBUTtRQUNULGlCQUFZLEdBQVosWUFBWSxDQUFLO1FBUnBCLGlCQUFZLEdBQTBCLEVBQTJCLENBQUM7UUFDcEcscUJBQWdCLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLGtCQUFhLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLGVBQVUsR0FBRyxLQUFLLENBQUM7UUFDbkIsY0FBUyxHQUFHLENBQUMsQ0FBQztRQU1aLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxTQUFTLENBQUM7SUFDcEMsQ0FBQztJQUVELFlBQVksQ0FBQyxLQUF3QjtRQUNuQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQzFELElBQUksQ0FBQyxZQUFZLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUE7SUFDakUsQ0FBQztJQUVELGFBQWEsQ0FBQyxLQUFhO1FBQ3pCLE1BQU0sT0FBTyxHQUFHLEVBQUUsQ0FBQztRQUNuQixNQUFNLE1BQU0sR0FBRyxHQUFHLENBQUM7UUFDbkIsTUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BDLE1BQU0sYUFBYSxHQUFHLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQyxHQUFHLEdBQUcsR0FBRyxPQUFPLENBQUM7UUFDN0QsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7SUFDckMsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkIsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUNyQyxDQUFDO0lBRUQsWUFBWTtRQUNWLElBQUksSUFBSSxDQUFDLFNBQVMsSUFBSSxDQUFDO1lBQUUsT0FBTztRQUNoQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDbkIsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLElBQUksQ0FBQyxTQUFTLElBQUksRUFBRTtZQUFFLE9BQU87UUFDakMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ25CLENBQUM7OzZHQTVDVSxnQkFBZ0Isa0JBU2pCLFVBQVUsYUFDVixrQkFBa0I7aUdBVmpCLGdCQUFnQixpR0FFaEIscUJBQXFCLGdEQ1psQyw0bkRBc0NNOzJGRDVCTyxnQkFBZ0I7a0JBTDVCLFNBQVM7K0JBQ0UsYUFBYTs7MEJBYXBCLE1BQU07MkJBQUMsVUFBVTs7MEJBQ2pCLE1BQU07MkJBQUMsa0JBQWtCOzRDQVJNLFlBQVk7c0JBQTdDLFNBQVM7dUJBQUMscUJBQXFCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbmplY3QsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBJbWFnZUNyb3BwZWRFdmVudCwgSW1hZ2VDcm9wcGVyQ29tcG9uZW50IH0gZnJvbSAnbmd4LWltYWdlLWNyb3BwZXInO1xyXG5pbXBvcnQgeyBJTUFHRV9EQVRBIH0gZnJvbSAnLi4vbW9kYWwvaW50ZXJmYWNlcy9pbWFnZS1kYXRhLmNvbnN0JztcclxuaW1wb3J0IHsgTU9EQUxfU0VSVklDRV9EQVRBIH0gZnJvbSAnLi4vbW9kYWwvaW50ZXJmYWNlcy9tb2RhbC1zZXJ2aWNlLWRhdGEuY29uc3QnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdjZGstY3JvcHBlcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2Nyb3BwZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2Nyb3BwZXIuY29tcG9uZW50LnNjc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ3JvcHBlckNvbXBvbmVudCB7XHJcblxyXG4gIEBWaWV3Q2hpbGQoSW1hZ2VDcm9wcGVyQ29tcG9uZW50KSBpbWFnZUNyb3BwZXI6IEltYWdlQ3JvcHBlckNvbXBvbmVudCA9IHt9IGFzIEltYWdlQ3JvcHBlckNvbXBvbmVudDtcclxuICBpbWFnZUNyb3BwZWRGaWxlID0gJyc7XHJcbiAgaW1hZ2VSb3RhdGlvbiA9IDA7XHJcbiAgaW1hZ2VGbGlwSCA9IGZhbHNlO1xyXG4gIGltYWdlWm9vbSA9IDE7XHJcbiAgXHJcbiAgY29uc3RydWN0b3IgKFxyXG4gICAgQEluamVjdChJTUFHRV9EQVRBKSBwdWJsaWMgaW1hZ2VGaWxlOiBzdHJpbmcsXHJcbiAgICBASW5qZWN0KE1PREFMX1NFUlZJQ0VfREFUQSkgcHVibGljIG1vZGFsU2VydmljZTogYW55LFxyXG4gICkge1xyXG4gICAgdGhpcy5pbWFnZUNyb3BwZWRGaWxlID0gaW1hZ2VGaWxlO1xyXG4gIH1cclxuXHJcbiAgaW1hZ2VDcm9wcGVkKGV2ZW50OiBJbWFnZUNyb3BwZWRFdmVudCkge1xyXG4gICAgdGhpcy5pbWFnZUNyb3BwZWRGaWxlID0gZXZlbnQub2JqZWN0VXJsIHx8IHRoaXMuaW1hZ2VGaWxlO1xyXG4gICAgdGhpcy5tb2RhbFNlcnZpY2UuZ2V0Q29tcG9uZW50UmVzdWx0RGF0YSh0aGlzLmltYWdlQ3JvcHBlZEZpbGUpXHJcbiAgfVxyXG5cclxuICBzZWxlY3RlZFJhbmdlKGV2ZW50OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGJhc2VEZWcgPSA0NTtcclxuICAgIGNvbnN0IG1heERlZyA9IDE4MDtcclxuICAgIGNvbnN0IHBhcnNlZFJhbmdlID0gcGFyc2VJbnQoZXZlbnQpO1xyXG4gICAgY29uc3QgdG90YWxUb1JvdGF0ZSA9IChwYXJzZWRSYW5nZSAqIG1heERlZykgLyAxMDAgLyBiYXNlRGVnO1xyXG4gICAgdGhpcy5pbWFnZVJvdGF0aW9uID0gdG90YWxUb1JvdGF0ZTtcclxuICB9XHJcblxyXG4gIHJvdGF0ZUltYWdlKCkge1xyXG4gICAgdGhpcy5pbWFnZVJvdGF0aW9uKys7XHJcbiAgfVxyXG5cclxuICBpbnZlcnRJbWFnZSgpIHtcclxuICAgIHRoaXMuaW1hZ2VGbGlwSCA9ICF0aGlzLmltYWdlRmxpcEg7XHJcbiAgfVxyXG5cclxuICB6b29tT3V0SW1hZ2UoKSB7XHJcbiAgICBpZiAodGhpcy5pbWFnZVpvb20gPD0gMSkgcmV0dXJuO1xyXG4gICAgdGhpcy5pbWFnZVpvb20tLTtcclxuICB9XHJcblxyXG4gIHpvb21JbkltYWdlKCkge1xyXG4gICAgaWYgKHRoaXMuaW1hZ2Vab29tID49IDEwKSByZXR1cm47XHJcbiAgICB0aGlzLmltYWdlWm9vbSsrO1xyXG4gIH1cclxufVxyXG4iLCI8ZGl2IGNsYXNzPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBmbGV4LWNvbHVtblwiPlxyXG4gICAgPGNkay1hdmF0YXJcclxuICAgICAgICBzaXplPVwieGxcIlxyXG4gICAgICAgIFtpbWFnZVVybF09XCJpbWFnZUNyb3BwZWRGaWxlXCJcclxuICAgID48L2Nkay1hdmF0YXI+XHJcblxyXG4gICAgPGRpdiBjbGFzcz1cInByZXZpZXcgbXQtNFwiPlxyXG4gICAgICAgIDxpbWFnZS1jcm9wcGVyXHJcbiAgICAgICAgICAgIFtpbWFnZVVSTF09XCJpbWFnZUZpbGVcIlxyXG4gICAgICAgICAgICBbYXNwZWN0UmF0aW9dPVwiMSAvIDFcIlxyXG4gICAgICAgICAgICBbY2FudmFzUm90YXRpb25dPVwiaW1hZ2VSb3RhdGlvblwiXHJcbiAgICAgICAgICAgIFttYWludGFpbkFzcGVjdFJhdGlvXT1cImZhbHNlXCJcclxuICAgICAgICAgICAgW3RyYW5zZm9ybV09XCJ7XHJcbiAgICAgICAgICAgICAgICBmbGlwSDogaW1hZ2VGbGlwSCxcclxuICAgICAgICAgICAgICAgIHNjYWxlOiBpbWFnZVpvb21cclxuICAgICAgICAgICAgfVwiXHJcbiAgICAgICAgICAgIChpbWFnZUNyb3BwZWQpPVwiaW1hZ2VDcm9wcGVkKCRldmVudClcIlxyXG4gICAgICAgID48L2ltYWdlLWNyb3BwZXI+XHJcbiAgICA8L2Rpdj5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHMgbXQtMiB3LTEwMFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWJldHdlZW5cIj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWUtMlwiPlJvdGF0ZTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxjZGstcmFuZ2UgKHNlbGVjdGVkUmFuZ2UpPVwic2VsZWN0ZWRSYW5nZSgkZXZlbnQpXCI+PC9jZGstcmFuZ2U+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlblwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiYmkgYmktYXJyb3ctY2xvY2t3aXNlXCIgdG9vbHRpcD1cIlJvdGF0ZVwiIHBsYWNlbWVudD1cInRvcFwiIChjbGljayk9XCJyb3RhdGVJbWFnZSgpXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiYmkgYmktc3ltbWV0cnktdmVydGljYWxcIiB0b29sdGlwPVwiSW52ZXJ0XCIgcGxhY2VtZW50PVwidG9wXCIgKGNsaWNrKT1cImludmVydEltYWdlKClcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJiaSBiaS1kYXNoXCIgdG9vbHRpcD1cIlpvb20gb3V0XCIgcGxhY2VtZW50PVwidG9wXCIgKGNsaWNrKT1cInpvb21PdXRJbWFnZSgpXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiYmkgYmktcGx1c1wiIHRvb2x0aXA9XCJab29tIGluXCIgcGxhY2VtZW50PVwidG9wXCIgKGNsaWNrKT1cInpvb21JbkltYWdlKClcIj48L2k+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuXHJcbjwvZGl2PiJdfQ==