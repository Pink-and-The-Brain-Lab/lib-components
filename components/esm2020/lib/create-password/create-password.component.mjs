import { Component, EventEmitter, Output, inject } from '@angular/core';
import { FormControl, FormGroup, Validators } from '@angular/forms';
import { Subject, takeUntil } from 'rxjs';
import { TranslateService } from '@ngx-translate/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../input-validation/input-validation.directive";
import * as i3 from "@angular/forms";
import * as i4 from "../password-validation/password-validation.directive";
import * as i5 from "@ngx-translate/core";
export class CreatePasswordComponent {
    constructor() {
        this.destroy$ = new Subject();
        this.passwordValidation = new EventEmitter();
        this.submitEvent = new EventEmitter();
        this.passwordEvent = new EventEmitter();
        this.inputConfig = ['password', 'password'];
        this.isPasswordValid = false;
        this.translateService = inject(TranslateService);
        this.passwordsAreEquals = () => {
            return () => {
                return this.password?.value === this.confirmPassword?.value ? null : { passwordsDiferent: true };
            };
        };
        this.form = new FormGroup({
            password: new FormControl('', [Validators.required]),
            confirmPassword: new FormControl('', [Validators.required, this.passwordsAreEquals()]),
        });
    }
    ngOnInit() {
        this.form.valueChanges
            .pipe(takeUntil(this.destroy$))
            .subscribe(() => {
            this.passwordValidation.emit(this._passwordValidation);
            if (!this._passwordValidation)
                return;
            this.passwordEvent.emit({
                password: this.password?.value,
                confirmPassword: this.confirmPassword?.value
            });
        });
    }
    ngOnDestroy() {
        this.destroy$.next(true);
        this.destroy$.unsubscribe();
    }
    validatePassword(value) {
        this.isPasswordValid = value;
    }
    ;
    get password() {
        return this.form?.get('password');
    }
    get confirmPassword() {
        return this.form?.get('confirmPassword');
    }
    get _passwordValidation() {
        const arePassValid = this.password?.valid && this.confirmPassword?.valid;
        const arePassEquals = this.password?.value === this.confirmPassword?.value;
        return this.isPasswordValid && !!arePassValid && arePassEquals;
    }
    togglePasswordVisibility(index, type) {
        this.inputConfig[index] = type;
    }
    submit() {
        if (!this._passwordValidation)
            return;
        this.submitEvent.emit();
    }
}
CreatePasswordComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.1.2", ngImport: i0, type: CreatePasswordComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
CreatePasswordComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.1.2", type: CreatePasswordComponent, selector: "cdk-create-password", outputs: { passwordValidation: "passwordValidation", submitEvent: "submitEvent", passwordEvent: "passwordEvent" }, ngImport: i0, template: "<form [formGroup]=\"form\" class=\"d-flex flex-column\" (submit)=\"submit()\">\r\n    <div class=\"row-form right-icon w-100\">\r\n        <input [type]=\"inputConfig[0]\" cdkInputValidation formControlName=\"password\" />\r\n        <label>{{ 'PASSWORD' | translate }}</label>\r\n        <i class=\"bi bi-eye\" *ngIf=\"inputConfig[0] !== 'password'\" (click)=\"togglePasswordVisibility(0, 'password')\"></i>\r\n        <i class=\"bi bi-eye-slash\" *ngIf=\"inputConfig[0] === 'password'\" (click)=\"togglePasswordVisibility(0, 'text')\"></i>\r\n\r\n        <small *ngIf=\"password && password.touched && password.errors\">\r\n            <span *ngIf=\"password && password.errors['required']\">{{ 'PASSWORD_REQUIRED' | translate }}</span>\r\n        </small>\r\n    </div>\r\n\r\n    <p\r\n        class=\"mt-4 mb-0\"\r\n        [cdkPasswordValidation]=\"password?.value\"\r\n        (isValid)=\"validatePassword($event)\"\r\n    >\r\n        {{ 'AT_LEAST' | translate }} \r\n        <span>8 {{ 'CHARACTERS' | translate }}</span>, \r\n        {{ 'INCLUDING_A' | translate }} \r\n        <span>{{ 'NUMBER' | translate }}</span> \r\n        {{ 'AND_A' | translate }} \r\n        <span>{{ 'LETTER' | translate }}</span>\r\n    </p>\r\n\r\n    <div class=\"row-form right-icon w-100\">\r\n        <input [type]=\"inputConfig[1]\" cdkInputValidation formControlName=\"confirmPassword\" />\r\n        <label>{{ 'CONFIRM_PASSWORD' | translate }}</label>\r\n        <i class=\"bi bi-eye\" *ngIf=\"inputConfig[1] !== 'password'\" (click)=\"togglePasswordVisibility(1, 'password')\"></i>\r\n        <i class=\"bi bi-eye-slash\" *ngIf=\"inputConfig[1] === 'password'\" (click)=\"togglePasswordVisibility(1, 'text')\"></i>\r\n\r\n        <small *ngIf=\"confirmPassword && confirmPassword.touched && confirmPassword.errors\">\r\n            <span *ngIf=\"confirmPassword && confirmPassword.errors['required']\">{{ 'FORM_VALIDATIONS.PASSWORD_CONFIRMATION_REQUIRED' | translate }}</span>\r\n            <span *ngIf=\"password && confirmPassword.errors['passwordsDiferent']\">{{ 'FORM_VALIDATIONS.PASSWORD_CONFIRMATION_NEED_TO_BE_EQUALS' | translate }}</span>\r\n        </small>\r\n    </div>\r\n\r\n    <button type=\"submit\" hidden></button>\r\n</form>", styles: ["p{color:var(--emphasis-low);font-size:.875em}i{color:var(--emphasis-low);cursor:pointer}\n"], dependencies: [{ kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.InputValidationDirective, selector: "[cdkInputValidation]" }, { kind: "directive", type: i3.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i3.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i3.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }, { kind: "directive", type: i4.PasswordValidationDirective, selector: "[cdkPasswordValidation]", inputs: ["cdkPasswordValidation"], outputs: ["isValid"] }, { kind: "pipe", type: i5.TranslatePipe, name: "translate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.1.2", ngImport: i0, type: CreatePasswordComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cdk-create-password', template: "<form [formGroup]=\"form\" class=\"d-flex flex-column\" (submit)=\"submit()\">\r\n    <div class=\"row-form right-icon w-100\">\r\n        <input [type]=\"inputConfig[0]\" cdkInputValidation formControlName=\"password\" />\r\n        <label>{{ 'PASSWORD' | translate }}</label>\r\n        <i class=\"bi bi-eye\" *ngIf=\"inputConfig[0] !== 'password'\" (click)=\"togglePasswordVisibility(0, 'password')\"></i>\r\n        <i class=\"bi bi-eye-slash\" *ngIf=\"inputConfig[0] === 'password'\" (click)=\"togglePasswordVisibility(0, 'text')\"></i>\r\n\r\n        <small *ngIf=\"password && password.touched && password.errors\">\r\n            <span *ngIf=\"password && password.errors['required']\">{{ 'PASSWORD_REQUIRED' | translate }}</span>\r\n        </small>\r\n    </div>\r\n\r\n    <p\r\n        class=\"mt-4 mb-0\"\r\n        [cdkPasswordValidation]=\"password?.value\"\r\n        (isValid)=\"validatePassword($event)\"\r\n    >\r\n        {{ 'AT_LEAST' | translate }} \r\n        <span>8 {{ 'CHARACTERS' | translate }}</span>, \r\n        {{ 'INCLUDING_A' | translate }} \r\n        <span>{{ 'NUMBER' | translate }}</span> \r\n        {{ 'AND_A' | translate }} \r\n        <span>{{ 'LETTER' | translate }}</span>\r\n    </p>\r\n\r\n    <div class=\"row-form right-icon w-100\">\r\n        <input [type]=\"inputConfig[1]\" cdkInputValidation formControlName=\"confirmPassword\" />\r\n        <label>{{ 'CONFIRM_PASSWORD' | translate }}</label>\r\n        <i class=\"bi bi-eye\" *ngIf=\"inputConfig[1] !== 'password'\" (click)=\"togglePasswordVisibility(1, 'password')\"></i>\r\n        <i class=\"bi bi-eye-slash\" *ngIf=\"inputConfig[1] === 'password'\" (click)=\"togglePasswordVisibility(1, 'text')\"></i>\r\n\r\n        <small *ngIf=\"confirmPassword && confirmPassword.touched && confirmPassword.errors\">\r\n            <span *ngIf=\"confirmPassword && confirmPassword.errors['required']\">{{ 'FORM_VALIDATIONS.PASSWORD_CONFIRMATION_REQUIRED' | translate }}</span>\r\n            <span *ngIf=\"password && confirmPassword.errors['passwordsDiferent']\">{{ 'FORM_VALIDATIONS.PASSWORD_CONFIRMATION_NEED_TO_BE_EQUALS' | translate }}</span>\r\n        </small>\r\n    </div>\r\n\r\n    <button type=\"submit\" hidden></button>\r\n</form>", styles: ["p{color:var(--emphasis-low);font-size:.875em}i{color:var(--emphasis-low);cursor:pointer}\n"] }]
        }], propDecorators: { passwordValidation: [{
                type: Output
            }], submitEvent: [{
                type: Output
            }], passwordEvent: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLXBhc3N3b3JkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbXBvbmVudHMvc3JjL2xpYi9jcmVhdGUtcGFzc3dvcmQvY3JlYXRlLXBhc3N3b3JkLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbXBvbmVudHMvc3JjL2xpYi9jcmVhdGUtcGFzc3dvcmQvY3JlYXRlLXBhc3N3b3JkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFxQixNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNGLE9BQU8sRUFBbUIsV0FBVyxFQUFFLFNBQVMsRUFBaUMsVUFBVSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEgsT0FBTyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFHMUMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7Ozs7Ozs7QUFPdkQsTUFBTSxPQUFPLHVCQUF1QjtJQUxwQztRQU9VLGFBQVEsR0FBRyxJQUFJLE9BQU8sRUFBVyxDQUFDO1FBQ2hDLHVCQUFrQixHQUFHLElBQUksWUFBWSxFQUFXLENBQUM7UUFDakQsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBUSxDQUFDO1FBQ3ZDLGtCQUFhLEdBQUcsSUFBSSxZQUFZLEVBQWtCLENBQUM7UUFDN0QsZ0JBQVcsR0FBZ0IsQ0FBQyxVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDcEQsb0JBQWUsR0FBRyxLQUFLLENBQUM7UUFDUCxxQkFBZ0IsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUU3RCx1QkFBa0IsR0FBRyxHQUFnQixFQUFFO1lBQ3JDLE9BQU8sR0FBNEIsRUFBRTtnQkFDbkMsT0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLEtBQUssS0FBSyxJQUFJLENBQUMsZUFBZSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLGlCQUFpQixFQUFFLElBQUksRUFBRSxDQUFDO1lBQ25HLENBQUMsQ0FBQTtRQUNILENBQUMsQ0FBQTtRQUVELFNBQUksR0FBRyxJQUFJLFNBQVMsQ0FBQztZQUNuQixRQUFRLEVBQUUsSUFBSSxXQUFXLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3BELGVBQWUsRUFBRSxJQUFJLFdBQVcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUM7U0FDdkYsQ0FBQyxDQUFDO0tBb0RKO0lBbERDLFFBQVE7UUFDTixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVk7YUFDbkIsSUFBSSxDQUNILFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQ3pCO2FBQ0EsU0FBUyxDQUNSLEdBQUcsRUFBRTtZQUNILElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDdkQsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUI7Z0JBQUUsT0FBTztZQUN0QyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQztnQkFDdEIsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSztnQkFDOUIsZUFBZSxFQUFFLElBQUksQ0FBQyxlQUFlLEVBQUUsS0FBSzthQUM3QyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQ0YsQ0FBQztJQUNOLENBQUM7SUFFRCxXQUFXO1FBQ1QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUM5QixDQUFDO0lBR0QsZ0JBQWdCLENBQUMsS0FBYztRQUM3QixJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztJQUMvQixDQUFDO0lBQUEsQ0FBQztJQUVGLElBQUksUUFBUTtRQUNWLE9BQU8sSUFBSSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELElBQUksZUFBZTtRQUNqQixPQUFPLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVELElBQUksbUJBQW1CO1FBQ3JCLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUUsS0FBSyxDQUFDO1FBQ3pFLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxLQUFLLElBQUksQ0FBQyxlQUFlLEVBQUUsS0FBSyxDQUFDO1FBQzNFLE9BQU8sSUFBSSxDQUFDLGVBQWUsSUFBSSxDQUFDLENBQUMsWUFBWSxJQUFJLGFBQWEsQ0FBQztJQUNqRSxDQUFDO0lBRUQsd0JBQXdCLENBQUMsS0FBYSxFQUFFLElBQWU7UUFDckQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDakMsQ0FBQztJQUVELE1BQU07UUFDSixJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQjtZQUFFLE9BQU87UUFDdEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMxQixDQUFDOztvSEFyRVUsdUJBQXVCO3dHQUF2Qix1QkFBdUIsOEtDWnBDLGtzRUFzQ087MkZEMUJNLHVCQUF1QjtrQkFMbkMsU0FBUzsrQkFDRSxxQkFBcUI7OEJBT3JCLGtCQUFrQjtzQkFBM0IsTUFBTTtnQkFDRyxXQUFXO3NCQUFwQixNQUFNO2dCQUNHLGFBQWE7c0JBQXRCLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dCwgaW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFic3RyYWN0Q29udHJvbCwgRm9ybUNvbnRyb2wsIEZvcm1Hcm91cCwgVmFsaWRhdGlvbkVycm9ycywgVmFsaWRhdG9yRm4sIFZhbGlkYXRvcnMgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IFN1YmplY3QsIHRha2VVbnRpbCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBJbnB1dFR5cGUgfSBmcm9tICcuL21vZGVscy9pbnB1dC10eXBlJztcclxuaW1wb3J0IHsgSVBhc3N3b3JkRXZlbnQgfSBmcm9tICcuL21vZGVscy9wYXNzd29yZC1ldmVudCc7XHJcbmltcG9ydCB7IFRyYW5zbGF0ZVNlcnZpY2UgfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnY2RrLWNyZWF0ZS1wYXNzd29yZCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2NyZWF0ZS1wYXNzd29yZC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vY3JlYXRlLXBhc3N3b3JkLmNvbXBvbmVudC5zY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIENyZWF0ZVBhc3N3b3JkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xyXG5cclxuICBwcml2YXRlIGRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8Ym9vbGVhbj4oKTtcclxuICBAT3V0cHV0KCkgcGFzc3dvcmRWYWxpZGF0aW9uID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xyXG4gIEBPdXRwdXQoKSBzdWJtaXRFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcclxuICBAT3V0cHV0KCkgcGFzc3dvcmRFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8SVBhc3N3b3JkRXZlbnQ+KCk7XHJcbiAgaW5wdXRDb25maWc6IElucHV0VHlwZVtdID0gWydwYXNzd29yZCcsICdwYXNzd29yZCddO1xyXG4gIGlzUGFzc3dvcmRWYWxpZCA9IGZhbHNlO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgdHJhbnNsYXRlU2VydmljZSA9IGluamVjdChUcmFuc2xhdGVTZXJ2aWNlKTtcclxuXHJcbiAgcGFzc3dvcmRzQXJlRXF1YWxzID0gKCk6IFZhbGlkYXRvckZuID0+IHtcclxuICAgIHJldHVybiAoKTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5wYXNzd29yZD8udmFsdWUgPT09IHRoaXMuY29uZmlybVBhc3N3b3JkPy52YWx1ZSA/IG51bGwgOiB7IHBhc3N3b3Jkc0RpZmVyZW50OiB0cnVlIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmb3JtID0gbmV3IEZvcm1Hcm91cCh7XHJcbiAgICBwYXNzd29yZDogbmV3IEZvcm1Db250cm9sKCcnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZF0pLFxyXG4gICAgY29uZmlybVBhc3N3b3JkOiBuZXcgRm9ybUNvbnRyb2woJycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCB0aGlzLnBhc3N3b3Jkc0FyZUVxdWFscygpXSksXHJcbiAgfSk7XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5mb3JtLnZhbHVlQ2hhbmdlc1xyXG4gICAgICAucGlwZShcclxuICAgICAgICB0YWtlVW50aWwodGhpcy5kZXN0cm95JClcclxuICAgICAgKVxyXG4gICAgICAuc3Vic2NyaWJlKFxyXG4gICAgICAgICgpID0+IHtcclxuICAgICAgICAgIHRoaXMucGFzc3dvcmRWYWxpZGF0aW9uLmVtaXQodGhpcy5fcGFzc3dvcmRWYWxpZGF0aW9uKTtcclxuICAgICAgICAgIGlmICghdGhpcy5fcGFzc3dvcmRWYWxpZGF0aW9uKSByZXR1cm47XHJcbiAgICAgICAgICB0aGlzLnBhc3N3b3JkRXZlbnQuZW1pdCh7XHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkPy52YWx1ZSxcclxuICAgICAgICAgICAgY29uZmlybVBhc3N3b3JkOiB0aGlzLmNvbmZpcm1QYXNzd29yZD8udmFsdWVcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5kZXN0cm95JC5uZXh0KHRydWUpO1xyXG4gICAgdGhpcy5kZXN0cm95JC51bnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcblxyXG4gIHZhbGlkYXRlUGFzc3dvcmQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuaXNQYXNzd29yZFZhbGlkID0gdmFsdWU7XHJcbiAgfTtcclxuXHJcbiAgZ2V0IHBhc3N3b3JkKCk6IEFic3RyYWN0Q29udHJvbCB8IG51bGwge1xyXG4gICAgcmV0dXJuIHRoaXMuZm9ybT8uZ2V0KCdwYXNzd29yZCcpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNvbmZpcm1QYXNzd29yZCgpOiBBYnN0cmFjdENvbnRyb2wgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLmZvcm0/LmdldCgnY29uZmlybVBhc3N3b3JkJyk7XHJcbiAgfVxyXG5cclxuICBnZXQgX3Bhc3N3b3JkVmFsaWRhdGlvbigpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGFyZVBhc3NWYWxpZCA9IHRoaXMucGFzc3dvcmQ/LnZhbGlkICYmIHRoaXMuY29uZmlybVBhc3N3b3JkPy52YWxpZDtcclxuICAgIGNvbnN0IGFyZVBhc3NFcXVhbHMgPSB0aGlzLnBhc3N3b3JkPy52YWx1ZSA9PT0gdGhpcy5jb25maXJtUGFzc3dvcmQ/LnZhbHVlO1xyXG4gICAgcmV0dXJuIHRoaXMuaXNQYXNzd29yZFZhbGlkICYmICEhYXJlUGFzc1ZhbGlkICYmIGFyZVBhc3NFcXVhbHM7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVQYXNzd29yZFZpc2liaWxpdHkoaW5kZXg6IG51bWJlciwgdHlwZTogSW5wdXRUeXBlKSB7XHJcbiAgICB0aGlzLmlucHV0Q29uZmlnW2luZGV4XSA9IHR5cGU7XHJcbiAgfVxyXG5cclxuICBzdWJtaXQoKSB7XHJcbiAgICBpZiAoIXRoaXMuX3Bhc3N3b3JkVmFsaWRhdGlvbikgcmV0dXJuO1xyXG4gICAgdGhpcy5zdWJtaXRFdmVudC5lbWl0KCk7XHJcbiAgfVxyXG5cclxufVxyXG4iLCI8Zm9ybSBbZm9ybUdyb3VwXT1cImZvcm1cIiBjbGFzcz1cImQtZmxleCBmbGV4LWNvbHVtblwiIChzdWJtaXQpPVwic3VibWl0KClcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJyb3ctZm9ybSByaWdodC1pY29uIHctMTAwXCI+XHJcbiAgICAgICAgPGlucHV0IFt0eXBlXT1cImlucHV0Q29uZmlnWzBdXCIgY2RrSW5wdXRWYWxpZGF0aW9uIGZvcm1Db250cm9sTmFtZT1cInBhc3N3b3JkXCIgLz5cclxuICAgICAgICA8bGFiZWw+e3sgJ1BBU1NXT1JEJyB8IHRyYW5zbGF0ZSB9fTwvbGFiZWw+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJiaSBiaS1leWVcIiAqbmdJZj1cImlucHV0Q29uZmlnWzBdICE9PSAncGFzc3dvcmQnXCIgKGNsaWNrKT1cInRvZ2dsZVBhc3N3b3JkVmlzaWJpbGl0eSgwLCAncGFzc3dvcmQnKVwiPjwvaT5cclxuICAgICAgICA8aSBjbGFzcz1cImJpIGJpLWV5ZS1zbGFzaFwiICpuZ0lmPVwiaW5wdXRDb25maWdbMF0gPT09ICdwYXNzd29yZCdcIiAoY2xpY2spPVwidG9nZ2xlUGFzc3dvcmRWaXNpYmlsaXR5KDAsICd0ZXh0JylcIj48L2k+XHJcblxyXG4gICAgICAgIDxzbWFsbCAqbmdJZj1cInBhc3N3b3JkICYmIHBhc3N3b3JkLnRvdWNoZWQgJiYgcGFzc3dvcmQuZXJyb3JzXCI+XHJcbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwicGFzc3dvcmQgJiYgcGFzc3dvcmQuZXJyb3JzWydyZXF1aXJlZCddXCI+e3sgJ1BBU1NXT1JEX1JFUVVJUkVEJyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cclxuICAgICAgICA8L3NtYWxsPlxyXG4gICAgPC9kaXY+XHJcblxyXG4gICAgPHBcclxuICAgICAgICBjbGFzcz1cIm10LTQgbWItMFwiXHJcbiAgICAgICAgW2Nka1Bhc3N3b3JkVmFsaWRhdGlvbl09XCJwYXNzd29yZD8udmFsdWVcIlxyXG4gICAgICAgIChpc1ZhbGlkKT1cInZhbGlkYXRlUGFzc3dvcmQoJGV2ZW50KVwiXHJcbiAgICA+XHJcbiAgICAgICAge3sgJ0FUX0xFQVNUJyB8IHRyYW5zbGF0ZSB9fSBcclxuICAgICAgICA8c3Bhbj44IHt7ICdDSEFSQUNURVJTJyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj4sIFxyXG4gICAgICAgIHt7ICdJTkNMVURJTkdfQScgfCB0cmFuc2xhdGUgfX0gXHJcbiAgICAgICAgPHNwYW4+e3sgJ05VTUJFUicgfCB0cmFuc2xhdGUgfX08L3NwYW4+IFxyXG4gICAgICAgIHt7ICdBTkRfQScgfCB0cmFuc2xhdGUgfX0gXHJcbiAgICAgICAgPHNwYW4+e3sgJ0xFVFRFUicgfCB0cmFuc2xhdGUgfX08L3NwYW4+XHJcbiAgICA8L3A+XHJcblxyXG4gICAgPGRpdiBjbGFzcz1cInJvdy1mb3JtIHJpZ2h0LWljb24gdy0xMDBcIj5cclxuICAgICAgICA8aW5wdXQgW3R5cGVdPVwiaW5wdXRDb25maWdbMV1cIiBjZGtJbnB1dFZhbGlkYXRpb24gZm9ybUNvbnRyb2xOYW1lPVwiY29uZmlybVBhc3N3b3JkXCIgLz5cclxuICAgICAgICA8bGFiZWw+e3sgJ0NPTkZJUk1fUEFTU1dPUkQnIHwgdHJhbnNsYXRlIH19PC9sYWJlbD5cclxuICAgICAgICA8aSBjbGFzcz1cImJpIGJpLWV5ZVwiICpuZ0lmPVwiaW5wdXRDb25maWdbMV0gIT09ICdwYXNzd29yZCdcIiAoY2xpY2spPVwidG9nZ2xlUGFzc3dvcmRWaXNpYmlsaXR5KDEsICdwYXNzd29yZCcpXCI+PC9pPlxyXG4gICAgICAgIDxpIGNsYXNzPVwiYmkgYmktZXllLXNsYXNoXCIgKm5nSWY9XCJpbnB1dENvbmZpZ1sxXSA9PT0gJ3Bhc3N3b3JkJ1wiIChjbGljayk9XCJ0b2dnbGVQYXNzd29yZFZpc2liaWxpdHkoMSwgJ3RleHQnKVwiPjwvaT5cclxuXHJcbiAgICAgICAgPHNtYWxsICpuZ0lmPVwiY29uZmlybVBhc3N3b3JkICYmIGNvbmZpcm1QYXNzd29yZC50b3VjaGVkICYmIGNvbmZpcm1QYXNzd29yZC5lcnJvcnNcIj5cclxuICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJjb25maXJtUGFzc3dvcmQgJiYgY29uZmlybVBhc3N3b3JkLmVycm9yc1sncmVxdWlyZWQnXVwiPnt7ICdGT1JNX1ZBTElEQVRJT05TLlBBU1NXT1JEX0NPTkZJUk1BVElPTl9SRVFVSVJFRCcgfCB0cmFuc2xhdGUgfX08L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwicGFzc3dvcmQgJiYgY29uZmlybVBhc3N3b3JkLmVycm9yc1sncGFzc3dvcmRzRGlmZXJlbnQnXVwiPnt7ICdGT1JNX1ZBTElEQVRJT05TLlBBU1NXT1JEX0NPTkZJUk1BVElPTl9ORUVEX1RPX0JFX0VRVUFMUycgfCB0cmFuc2xhdGUgfX08L3NwYW4+XHJcbiAgICAgICAgPC9zbWFsbD5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGhpZGRlbj48L2J1dHRvbj5cclxuPC9mb3JtPiJdfQ==