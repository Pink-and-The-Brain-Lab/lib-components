import { Component, EventEmitter, Input, Output } from '@angular/core';
import { FormControl, FormGroup, Validators } from '@angular/forms';
import { Subject, takeUntil } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../input-validation/input-validation.directive";
import * as i3 from "@angular/forms";
import * as i4 from "../password-validation/password-validation.directive";
export class CreatePasswordComponent {
    constructor() {
        this.destroy$ = new Subject();
        this.passwordValidation = new EventEmitter();
        this.submitEvent = new EventEmitter();
        this.passwordEvent = new EventEmitter();
        this.messageValidation = { password: '', confirmPassword: '' };
        this.inputConfig = ['password', 'password'];
        this.isPasswordValid = false;
        this.passwordsAreEquals = () => {
            return () => {
                return this.password?.value === this.confirmPassword?.value ? null : { passwordsDiferent: true };
            };
        };
        this.form = new FormGroup({
            password: new FormControl('', [Validators.required]),
            confirmPassword: new FormControl('', [Validators.required, this.passwordsAreEquals()]),
        });
    }
    ngOnInit() {
        this.form.valueChanges
            .pipe(takeUntil(this.destroy$))
            .subscribe(() => {
            this.passwordValidation.emit(this._passwordValidation);
            if (!this._passwordValidation)
                return;
            this.passwordEvent.emit({
                password: this.password?.value,
                confirmPassword: this.confirmPassword?.value
            });
        });
    }
    ngOnDestroy() {
        this.destroy$.next(true);
        this.destroy$.unsubscribe();
    }
    validatePassword(value) {
        this.isPasswordValid = value;
    }
    ;
    get password() {
        return this.form?.get('password');
    }
    get confirmPassword() {
        return this.form?.get('confirmPassword');
    }
    get _passwordValidation() {
        const arePassValid = this.password?.valid && this.confirmPassword?.valid;
        const arePassEquals = this.password?.value === this.confirmPassword?.value;
        return this.isPasswordValid && !!arePassValid && arePassEquals;
    }
    togglePasswordVisibility(index, type) {
        this.inputConfig[index] = type;
    }
    submit() {
        if (!this._passwordValidation)
            return;
        this.submitEvent.emit();
    }
}
CreatePasswordComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.1.2", ngImport: i0, type: CreatePasswordComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
CreatePasswordComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.1.2", type: CreatePasswordComponent, selector: "cdk-create-password", inputs: { messageValidation: "messageValidation" }, outputs: { passwordValidation: "passwordValidation", submitEvent: "submitEvent", passwordEvent: "passwordEvent" }, ngImport: i0, template: "<form [formGroup]=\"form\" class=\"d-flex flex-column\" (submit)=\"submit()\">\r\n    <div class=\"row-form right-icon w-100\">\r\n        <input [type]=\"inputConfig[0]\" cdkInputValidation formControlName=\"password\" />\r\n        <label>Password</label>\r\n        <i class=\"bi bi-eye\" *ngIf=\"inputConfig[0] !== 'password'\" (click)=\"togglePasswordVisibility(0, 'password')\"></i>\r\n        <i class=\"bi bi-eye-slash\" *ngIf=\"inputConfig[0] === 'password'\" (click)=\"togglePasswordVisibility(0, 'text')\"></i>\r\n\r\n        <small *ngIf=\"password && password.touched && password.errors\">\r\n            <span *ngIf=\"password && password.errors['required']\">Password is required</span>\r\n        </small>\r\n    </div>\r\n\r\n    <p\r\n        class=\"mt-4 mb-0\"\r\n        [cdkPasswordValidation]=\"password?.value\"\r\n        (isValid)=\"validatePassword($event)\"\r\n    >\r\n        At least <span>8 characters</span>, including a <span>number</span> and a <span>letter</span>\r\n    </p>\r\n\r\n    <div class=\"row-form right-icon w-100\">\r\n        <input [type]=\"inputConfig[1]\" cdkInputValidation formControlName=\"confirmPassword\" />\r\n        <label>Confirm Password</label>\r\n        <i class=\"bi bi-eye\" *ngIf=\"inputConfig[1] !== 'password'\" (click)=\"togglePasswordVisibility(1, 'password')\"></i>\r\n        <i class=\"bi bi-eye-slash\" *ngIf=\"inputConfig[1] === 'password'\" (click)=\"togglePasswordVisibility(1, 'text')\"></i>\r\n\r\n        <small *ngIf=\"confirmPassword && confirmPassword.touched && confirmPassword.errors\">\r\n            <span *ngIf=\"confirmPassword && confirmPassword.errors['required']\">{{ messageValidation.password }}</span>\r\n            <span *ngIf=\"password && confirmPassword.errors['passwordsDiferent']\">{{ messageValidation.confirmPassword }}</span>\r\n        </small>\r\n    </div>\r\n\r\n    <button type=\"submit\" hidden></button>\r\n</form>", styles: ["p{color:#7f858c;font-size:.875em}i{color:#7f858c;cursor:pointer}\n"], dependencies: [{ kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.InputValidationDirective, selector: "[cdkInputValidation]" }, { kind: "directive", type: i3.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i3.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i3.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }, { kind: "directive", type: i4.PasswordValidationDirective, selector: "[cdkPasswordValidation]", inputs: ["cdkPasswordValidation"], outputs: ["isValid"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.1.2", ngImport: i0, type: CreatePasswordComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cdk-create-password', template: "<form [formGroup]=\"form\" class=\"d-flex flex-column\" (submit)=\"submit()\">\r\n    <div class=\"row-form right-icon w-100\">\r\n        <input [type]=\"inputConfig[0]\" cdkInputValidation formControlName=\"password\" />\r\n        <label>Password</label>\r\n        <i class=\"bi bi-eye\" *ngIf=\"inputConfig[0] !== 'password'\" (click)=\"togglePasswordVisibility(0, 'password')\"></i>\r\n        <i class=\"bi bi-eye-slash\" *ngIf=\"inputConfig[0] === 'password'\" (click)=\"togglePasswordVisibility(0, 'text')\"></i>\r\n\r\n        <small *ngIf=\"password && password.touched && password.errors\">\r\n            <span *ngIf=\"password && password.errors['required']\">Password is required</span>\r\n        </small>\r\n    </div>\r\n\r\n    <p\r\n        class=\"mt-4 mb-0\"\r\n        [cdkPasswordValidation]=\"password?.value\"\r\n        (isValid)=\"validatePassword($event)\"\r\n    >\r\n        At least <span>8 characters</span>, including a <span>number</span> and a <span>letter</span>\r\n    </p>\r\n\r\n    <div class=\"row-form right-icon w-100\">\r\n        <input [type]=\"inputConfig[1]\" cdkInputValidation formControlName=\"confirmPassword\" />\r\n        <label>Confirm Password</label>\r\n        <i class=\"bi bi-eye\" *ngIf=\"inputConfig[1] !== 'password'\" (click)=\"togglePasswordVisibility(1, 'password')\"></i>\r\n        <i class=\"bi bi-eye-slash\" *ngIf=\"inputConfig[1] === 'password'\" (click)=\"togglePasswordVisibility(1, 'text')\"></i>\r\n\r\n        <small *ngIf=\"confirmPassword && confirmPassword.touched && confirmPassword.errors\">\r\n            <span *ngIf=\"confirmPassword && confirmPassword.errors['required']\">{{ messageValidation.password }}</span>\r\n            <span *ngIf=\"password && confirmPassword.errors['passwordsDiferent']\">{{ messageValidation.confirmPassword }}</span>\r\n        </small>\r\n    </div>\r\n\r\n    <button type=\"submit\" hidden></button>\r\n</form>", styles: ["p{color:#7f858c;font-size:.875em}i{color:#7f858c;cursor:pointer}\n"] }]
        }], propDecorators: { passwordValidation: [{
                type: Output
            }], submitEvent: [{
                type: Output
            }], passwordEvent: [{
                type: Output
            }], messageValidation: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLXBhc3N3b3JkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbXBvbmVudHMvc3JjL2xpYi9jcmVhdGUtcGFzc3dvcmQvY3JlYXRlLXBhc3N3b3JkLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbXBvbmVudHMvc3JjL2xpYi9jcmVhdGUtcGFzc3dvcmQvY3JlYXRlLXBhc3N3b3JkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBcUIsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzFGLE9BQU8sRUFBbUIsV0FBVyxFQUFFLFNBQVMsRUFBaUMsVUFBVSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEgsT0FBTyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxNQUFNLENBQUM7Ozs7OztBQVUxQyxNQUFNLE9BQU8sdUJBQXVCO0lBTHBDO1FBT1UsYUFBUSxHQUFHLElBQUksT0FBTyxFQUFXLENBQUM7UUFDaEMsdUJBQWtCLEdBQUcsSUFBSSxZQUFZLEVBQVcsQ0FBQztRQUNqRCxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7UUFDdkMsa0JBQWEsR0FBRyxJQUFJLFlBQVksRUFBa0IsQ0FBQztRQUNwRCxzQkFBaUIsR0FBdUIsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLGVBQWUsRUFBRSxFQUFFLEVBQUUsQ0FBQztRQUN2RixnQkFBVyxHQUFnQixDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUNwRCxvQkFBZSxHQUFHLEtBQUssQ0FBQztRQUV4Qix1QkFBa0IsR0FBRyxHQUFnQixFQUFFO1lBQ3JDLE9BQU8sR0FBNEIsRUFBRTtnQkFDbkMsT0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLEtBQUssS0FBSyxJQUFJLENBQUMsZUFBZSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLGlCQUFpQixFQUFFLElBQUksRUFBRSxDQUFDO1lBQ25HLENBQUMsQ0FBQTtRQUNILENBQUMsQ0FBQTtRQUVELFNBQUksR0FBRyxJQUFJLFNBQVMsQ0FBQztZQUNuQixRQUFRLEVBQUUsSUFBSSxXQUFXLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3BELGVBQWUsRUFBRSxJQUFJLFdBQVcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUM7U0FDdkYsQ0FBQyxDQUFDO0tBb0RKO0lBbERDLFFBQVE7UUFDTixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVk7YUFDbkIsSUFBSSxDQUNILFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQ3pCO2FBQ0EsU0FBUyxDQUNSLEdBQUcsRUFBRTtZQUNILElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDdkQsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUI7Z0JBQUUsT0FBTztZQUN0QyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQztnQkFDdEIsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSztnQkFDOUIsZUFBZSxFQUFFLElBQUksQ0FBQyxlQUFlLEVBQUUsS0FBSzthQUM3QyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQ0YsQ0FBQztJQUNOLENBQUM7SUFFRCxXQUFXO1FBQ1QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUM5QixDQUFDO0lBR0QsZ0JBQWdCLENBQUMsS0FBYztRQUM3QixJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztJQUMvQixDQUFDO0lBQUEsQ0FBQztJQUVGLElBQUksUUFBUTtRQUNWLE9BQU8sSUFBSSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELElBQUksZUFBZTtRQUNqQixPQUFPLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVELElBQUksbUJBQW1CO1FBQ3JCLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUUsS0FBSyxDQUFDO1FBQ3pFLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxLQUFLLElBQUksQ0FBQyxlQUFlLEVBQUUsS0FBSyxDQUFDO1FBQzNFLE9BQU8sSUFBSSxDQUFDLGVBQWUsSUFBSSxDQUFDLENBQUMsWUFBWSxJQUFJLGFBQWEsQ0FBQztJQUNqRSxDQUFDO0lBRUQsd0JBQXdCLENBQUMsS0FBYSxFQUFFLElBQWU7UUFDckQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDakMsQ0FBQztJQUVELE1BQU07UUFDSixJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQjtZQUFFLE9BQU87UUFDdEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMxQixDQUFDOztvSEFyRVUsdUJBQXVCO3dHQUF2Qix1QkFBdUIsa09DWnBDLDY0REFpQ087MkZEckJNLHVCQUF1QjtrQkFMbkMsU0FBUzsrQkFDRSxxQkFBcUI7OEJBT3JCLGtCQUFrQjtzQkFBM0IsTUFBTTtnQkFDRyxXQUFXO3NCQUFwQixNQUFNO2dCQUNHLGFBQWE7c0JBQXRCLE1BQU07Z0JBQ0UsaUJBQWlCO3NCQUF6QixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkRlc3Ryb3ksIE9uSW5pdCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFic3RyYWN0Q29udHJvbCwgRm9ybUNvbnRyb2wsIEZvcm1Hcm91cCwgVmFsaWRhdGlvbkVycm9ycywgVmFsaWRhdG9yRm4sIFZhbGlkYXRvcnMgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IFN1YmplY3QsIHRha2VVbnRpbCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBJbnB1dFR5cGUgfSBmcm9tICcuL21vZGVscy9pbnB1dC10eXBlJztcclxuaW1wb3J0IHsgSVBhc3N3b3JkRXZlbnQgfSBmcm9tICcuL21vZGVscy9wYXNzd29yZC1ldmVudCc7XHJcbmltcG9ydCB7IElNZXNzYWdlVmFsaWRhdGlvbiB9IGZyb20gJy4vbW9kZWxzL21lc3NhZ2UtdmFsaWRhdGlvbic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2Nkay1jcmVhdGUtcGFzc3dvcmQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9jcmVhdGUtcGFzc3dvcmQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2NyZWF0ZS1wYXNzd29yZC5jb21wb25lbnQuc2NzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBDcmVhdGVQYXNzd29yZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcclxuXHJcbiAgcHJpdmF0ZSBkZXN0cm95JCA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KCk7XHJcbiAgQE91dHB1dCgpIHBhc3N3b3JkVmFsaWRhdGlvbiA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcclxuICBAT3V0cHV0KCkgc3VibWl0RXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcbiAgQE91dHB1dCgpIHBhc3N3b3JkRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPElQYXNzd29yZEV2ZW50PigpO1xyXG4gIEBJbnB1dCgpIG1lc3NhZ2VWYWxpZGF0aW9uOiBJTWVzc2FnZVZhbGlkYXRpb24gPSB7IHBhc3N3b3JkOiAnJywgY29uZmlybVBhc3N3b3JkOiAnJyB9O1xyXG4gIGlucHV0Q29uZmlnOiBJbnB1dFR5cGVbXSA9IFsncGFzc3dvcmQnLCAncGFzc3dvcmQnXTtcclxuICBpc1Bhc3N3b3JkVmFsaWQgPSBmYWxzZTtcclxuXHJcbiAgcGFzc3dvcmRzQXJlRXF1YWxzID0gKCk6IFZhbGlkYXRvckZuID0+IHtcclxuICAgIHJldHVybiAoKTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5wYXNzd29yZD8udmFsdWUgPT09IHRoaXMuY29uZmlybVBhc3N3b3JkPy52YWx1ZSA/IG51bGwgOiB7IHBhc3N3b3Jkc0RpZmVyZW50OiB0cnVlIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmb3JtID0gbmV3IEZvcm1Hcm91cCh7XHJcbiAgICBwYXNzd29yZDogbmV3IEZvcm1Db250cm9sKCcnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZF0pLFxyXG4gICAgY29uZmlybVBhc3N3b3JkOiBuZXcgRm9ybUNvbnRyb2woJycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCB0aGlzLnBhc3N3b3Jkc0FyZUVxdWFscygpXSksXHJcbiAgfSk7XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5mb3JtLnZhbHVlQ2hhbmdlc1xyXG4gICAgICAucGlwZShcclxuICAgICAgICB0YWtlVW50aWwodGhpcy5kZXN0cm95JClcclxuICAgICAgKVxyXG4gICAgICAuc3Vic2NyaWJlKFxyXG4gICAgICAgICgpID0+IHtcclxuICAgICAgICAgIHRoaXMucGFzc3dvcmRWYWxpZGF0aW9uLmVtaXQodGhpcy5fcGFzc3dvcmRWYWxpZGF0aW9uKTtcclxuICAgICAgICAgIGlmICghdGhpcy5fcGFzc3dvcmRWYWxpZGF0aW9uKSByZXR1cm47XHJcbiAgICAgICAgICB0aGlzLnBhc3N3b3JkRXZlbnQuZW1pdCh7XHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkPy52YWx1ZSxcclxuICAgICAgICAgICAgY29uZmlybVBhc3N3b3JkOiB0aGlzLmNvbmZpcm1QYXNzd29yZD8udmFsdWVcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5kZXN0cm95JC5uZXh0KHRydWUpO1xyXG4gICAgdGhpcy5kZXN0cm95JC51bnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcblxyXG4gIHZhbGlkYXRlUGFzc3dvcmQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuaXNQYXNzd29yZFZhbGlkID0gdmFsdWU7XHJcbiAgfTtcclxuXHJcbiAgZ2V0IHBhc3N3b3JkKCk6IEFic3RyYWN0Q29udHJvbCB8IG51bGwge1xyXG4gICAgcmV0dXJuIHRoaXMuZm9ybT8uZ2V0KCdwYXNzd29yZCcpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNvbmZpcm1QYXNzd29yZCgpOiBBYnN0cmFjdENvbnRyb2wgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLmZvcm0/LmdldCgnY29uZmlybVBhc3N3b3JkJyk7XHJcbiAgfVxyXG5cclxuICBnZXQgX3Bhc3N3b3JkVmFsaWRhdGlvbigpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGFyZVBhc3NWYWxpZCA9IHRoaXMucGFzc3dvcmQ/LnZhbGlkICYmIHRoaXMuY29uZmlybVBhc3N3b3JkPy52YWxpZDtcclxuICAgIGNvbnN0IGFyZVBhc3NFcXVhbHMgPSB0aGlzLnBhc3N3b3JkPy52YWx1ZSA9PT0gdGhpcy5jb25maXJtUGFzc3dvcmQ/LnZhbHVlO1xyXG4gICAgcmV0dXJuIHRoaXMuaXNQYXNzd29yZFZhbGlkICYmICEhYXJlUGFzc1ZhbGlkICYmIGFyZVBhc3NFcXVhbHM7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVQYXNzd29yZFZpc2liaWxpdHkoaW5kZXg6IG51bWJlciwgdHlwZTogSW5wdXRUeXBlKSB7XHJcbiAgICB0aGlzLmlucHV0Q29uZmlnW2luZGV4XSA9IHR5cGU7XHJcbiAgfVxyXG5cclxuICBzdWJtaXQoKSB7XHJcbiAgICBpZiAoIXRoaXMuX3Bhc3N3b3JkVmFsaWRhdGlvbikgcmV0dXJuO1xyXG4gICAgdGhpcy5zdWJtaXRFdmVudC5lbWl0KCk7XHJcbiAgfVxyXG5cclxufVxyXG4iLCI8Zm9ybSBbZm9ybUdyb3VwXT1cImZvcm1cIiBjbGFzcz1cImQtZmxleCBmbGV4LWNvbHVtblwiIChzdWJtaXQpPVwic3VibWl0KClcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJyb3ctZm9ybSByaWdodC1pY29uIHctMTAwXCI+XHJcbiAgICAgICAgPGlucHV0IFt0eXBlXT1cImlucHV0Q29uZmlnWzBdXCIgY2RrSW5wdXRWYWxpZGF0aW9uIGZvcm1Db250cm9sTmFtZT1cInBhc3N3b3JkXCIgLz5cclxuICAgICAgICA8bGFiZWw+UGFzc3dvcmQ8L2xhYmVsPlxyXG4gICAgICAgIDxpIGNsYXNzPVwiYmkgYmktZXllXCIgKm5nSWY9XCJpbnB1dENvbmZpZ1swXSAhPT0gJ3Bhc3N3b3JkJ1wiIChjbGljayk9XCJ0b2dnbGVQYXNzd29yZFZpc2liaWxpdHkoMCwgJ3Bhc3N3b3JkJylcIj48L2k+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJiaSBiaS1leWUtc2xhc2hcIiAqbmdJZj1cImlucHV0Q29uZmlnWzBdID09PSAncGFzc3dvcmQnXCIgKGNsaWNrKT1cInRvZ2dsZVBhc3N3b3JkVmlzaWJpbGl0eSgwLCAndGV4dCcpXCI+PC9pPlxyXG5cclxuICAgICAgICA8c21hbGwgKm5nSWY9XCJwYXNzd29yZCAmJiBwYXNzd29yZC50b3VjaGVkICYmIHBhc3N3b3JkLmVycm9yc1wiPlxyXG4gICAgICAgICAgICA8c3BhbiAqbmdJZj1cInBhc3N3b3JkICYmIHBhc3N3b3JkLmVycm9yc1sncmVxdWlyZWQnXVwiPlBhc3N3b3JkIGlzIHJlcXVpcmVkPC9zcGFuPlxyXG4gICAgICAgIDwvc21hbGw+XHJcbiAgICA8L2Rpdj5cclxuXHJcbiAgICA8cFxyXG4gICAgICAgIGNsYXNzPVwibXQtNCBtYi0wXCJcclxuICAgICAgICBbY2RrUGFzc3dvcmRWYWxpZGF0aW9uXT1cInBhc3N3b3JkPy52YWx1ZVwiXHJcbiAgICAgICAgKGlzVmFsaWQpPVwidmFsaWRhdGVQYXNzd29yZCgkZXZlbnQpXCJcclxuICAgID5cclxuICAgICAgICBBdCBsZWFzdCA8c3Bhbj44IGNoYXJhY3RlcnM8L3NwYW4+LCBpbmNsdWRpbmcgYSA8c3Bhbj5udW1iZXI8L3NwYW4+IGFuZCBhIDxzcGFuPmxldHRlcjwvc3Bhbj5cclxuICAgIDwvcD5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwicm93LWZvcm0gcmlnaHQtaWNvbiB3LTEwMFwiPlxyXG4gICAgICAgIDxpbnB1dCBbdHlwZV09XCJpbnB1dENvbmZpZ1sxXVwiIGNka0lucHV0VmFsaWRhdGlvbiBmb3JtQ29udHJvbE5hbWU9XCJjb25maXJtUGFzc3dvcmRcIiAvPlxyXG4gICAgICAgIDxsYWJlbD5Db25maXJtIFBhc3N3b3JkPC9sYWJlbD5cclxuICAgICAgICA8aSBjbGFzcz1cImJpIGJpLWV5ZVwiICpuZ0lmPVwiaW5wdXRDb25maWdbMV0gIT09ICdwYXNzd29yZCdcIiAoY2xpY2spPVwidG9nZ2xlUGFzc3dvcmRWaXNpYmlsaXR5KDEsICdwYXNzd29yZCcpXCI+PC9pPlxyXG4gICAgICAgIDxpIGNsYXNzPVwiYmkgYmktZXllLXNsYXNoXCIgKm5nSWY9XCJpbnB1dENvbmZpZ1sxXSA9PT0gJ3Bhc3N3b3JkJ1wiIChjbGljayk9XCJ0b2dnbGVQYXNzd29yZFZpc2liaWxpdHkoMSwgJ3RleHQnKVwiPjwvaT5cclxuXHJcbiAgICAgICAgPHNtYWxsICpuZ0lmPVwiY29uZmlybVBhc3N3b3JkICYmIGNvbmZpcm1QYXNzd29yZC50b3VjaGVkICYmIGNvbmZpcm1QYXNzd29yZC5lcnJvcnNcIj5cclxuICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJjb25maXJtUGFzc3dvcmQgJiYgY29uZmlybVBhc3N3b3JkLmVycm9yc1sncmVxdWlyZWQnXVwiPnt7IG1lc3NhZ2VWYWxpZGF0aW9uLnBhc3N3b3JkIH19PC9zcGFuPlxyXG4gICAgICAgICAgICA8c3BhbiAqbmdJZj1cInBhc3N3b3JkICYmIGNvbmZpcm1QYXNzd29yZC5lcnJvcnNbJ3Bhc3N3b3Jkc0RpZmVyZW50J11cIj57eyBtZXNzYWdlVmFsaWRhdGlvbi5jb25maXJtUGFzc3dvcmQgfX08L3NwYW4+XHJcbiAgICAgICAgPC9zbWFsbD5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGhpZGRlbj48L2J1dHRvbj5cclxuPC9mb3JtPiJdfQ==